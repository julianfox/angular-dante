/**
 * angular-dante
 * @version v0.1.0 - 2015-04-29
 * @link https://github.com/thijsw/angular-medium-editor
 * @author Thijs Wijnmaalen <thijs@wijnmaalen.name>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("angular-dante").directive("dante",["$timeout",function(a){return{require:"ngModel",restrict:"AE",scope:{bindOptions:"=",fireSave:"=fireSave",activateAutoSave:"=activateAutoSave"},link:function(b,c,d,e){var f={el:c},g={},h=function(){d.options&&(g=b.$eval(d.options));var a={};void 0!==b.bindOptions&&(a=b.bindOptions),g=angular.extend(f,g,a)};h(),b.$watch("activateAutoSave",function(a){a&&b.store()}),b.$watch("fireSave",function(a){void 0!==a&&e.$setViewValue(b.getContent())}),b.getContent=function(){return c.find(".section-inner").html()},b.checkForStore=function(){return b.content?b.content===b.getContent()?b.store():(b.content=b.getContent(),void b.$apply(function(){return e.$setViewValue(b.getContent()),b.store()})):(b.content=b.getContent(),b.store())},b.store=function(){return a(function(){return b.checkForStore()},6e3)},e.$render=function(){this.editor||(this.editor=new Dante.Editor(g),this.editor.start()),e.$isEmpty(e.$viewValue)||c.find(".section-inner").html(e.$viewValue)}}}}]);